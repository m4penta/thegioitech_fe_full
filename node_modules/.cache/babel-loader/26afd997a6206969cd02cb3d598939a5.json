{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{faMagnifyingGlass}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{useEffect,useState}from'react';import{useForm}from'react-hook-form';import{Link}from'react-router-dom';import{SearchItem}from'./search-item';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Search=function Search(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filterData=_useState2[0],setFilterData=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),filterMessage=_useState6[0],setFilterMessage=_useState6[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;useEffect(function(){var handleOuterClick=function handleOuterClick(_ref){var target=_ref.target;if(target.className!=='header-search-data'){setMessage(undefined);setFilterMessage('');setFilterData([]);}};if(filterData.length>0||message){window.addEventListener('click',handleOuterClick);}return function(){window.removeEventListener('click',handleOuterClick);};},[filterData,message]);var onSearchFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var productQuery,_yield$axios$get,filter;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:productQuery=data.search;if(productQuery){_context.next=5;break;}setFilterData([]);setMessage(undefined);return _context.abrupt(\"return\");case 5:_context.next=7;return axios.get('https://thegioitech-be.herokuapp.com/api/product/search/'+productQuery);case 7:_yield$axios$get=_context.sent;filter=_yield$axios$get.data;if(filter.length>0){setFilterData(filter);setFilterMessage(productQuery);setMessage(undefined);}else{setFilterData([]);setMessage('Not found');setFilterMessage('');}case 10:case\"end\":return _context.stop();}}},_callee);}));return function onSearchFormSubmit(_x){return _ref2.apply(this,arguments);};}();var handleCloseModal=function handleCloseModal(){setMessage(undefined);setFilterMessage('');setFilterData([]);};return/*#__PURE__*/_jsx(\"section\",{className:\"header-search-wrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-search\",children:[/*#__PURE__*/_jsxs(\"form\",{onChange:handleSubmit(onSearchFormSubmit),onSubmit:handleSubmit(onSearchFormSubmit),className:\"header-search-form\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('search')),{},{placeholder:\"H\\xF4m nay b\\u1EA1n c\\u1EA7n t\\xECm g\\xEC?\",className:\"form-input header-search-input\"})),/*#__PURE__*/_jsx(\"button\",{title:\"search button\",type:\"submit\",className:\"btn header-search-btn\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faMagnifyingGlass})})]}),(filterData.length>0||message)&&/*#__PURE__*/_jsxs(\"section\",{className:\"header-search-data\",children:[filterData.map(function(item,index){return/*#__PURE__*/_jsx(SearchItem,{data:item,closeModal:handleCloseModal},index);}),filterData.length>0&&/*#__PURE__*/_jsxs(Link,{to:\"/search/\".concat(filterMessage),className:\"header-search-filter-message\",children:[\"Hi\\u1EC3n th\\u1ECB k\\u1EBFt qu\\u1EA3 cho \",/*#__PURE__*/_jsx(\"span\",{children:filterMessage})]}),message&&/*#__PURE__*/_jsx(\"span\",{children:message})]})]})});};","map":{"version":3,"names":["faMagnifyingGlass","FontAwesomeIcon","useEffect","useState","useForm","Link","SearchItem","axios","jsx","_jsx","jsxs","_jsxs","Search","_useState","_useState2","_slicedToArray","filterData","setFilterData","_useState3","undefined","_useState4","message","setMessage","_useState5","_useState6","filterMessage","setFilterMessage","_useForm","register","handleSubmit","handleOuterClick","_ref","target","className","length","window","addEventListener","removeEventListener","onSearchFormSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","productQuery","_yield$axios$get","filter","wrap","_callee$","_context","prev","next","search","abrupt","get","sent","stop","_x","apply","arguments","handleCloseModal","children","onChange","onSubmit","_objectSpread","placeholder","title","type","icon","map","item","index","closeModal","to","concat"],"sources":["/Users/mac/Documents/Đồ án tốt nghiệp/ĐỒ ÁN/FE/thegioitech_fe_full/src/component/layout/header/search.jsx"],"sourcesContent":["import { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { SearchItem } from './search-item';\nimport axios from 'axios';\n\nexport const Search = () => {\n  const [filterData, setFilterData] = useState([]);\n  const [message, setMessage] = useState(undefined);\n  const [filterMessage, setFilterMessage] = useState('');\n  const { register, handleSubmit } = useForm();\n\n  useEffect(() => {\n    const handleOuterClick = ({ target }) => {\n      if (target.className !== 'header-search-data') {\n        setMessage(undefined);\n        setFilterMessage('');\n        setFilterData([]);\n      }\n    };\n    if (filterData.length > 0 || message) {\n      window.addEventListener('click', handleOuterClick);\n    }\n    return () => {\n      window.removeEventListener('click', handleOuterClick);\n    };\n  }, [filterData, message]);\n\n  const onSearchFormSubmit = async (data) => {\n    const productQuery = data.search;\n    if (!productQuery) {\n      setFilterData([]);\n      setMessage(undefined);\n      return;\n    }\n    const { data: filter } = await axios.get(\n      'https://thegioitech-be.herokuapp.com/api/product/search/' + productQuery\n    );\n    if (filter.length > 0) {\n      setFilterData(filter);\n      setFilterMessage(productQuery);\n      setMessage(undefined);\n    } else {\n      setFilterData([]);\n      setMessage('Not found');\n      setFilterMessage('');\n    }\n  };\n\n  const handleCloseModal = () => {\n    setMessage(undefined);\n    setFilterMessage('');\n    setFilterData([]);\n  };\n\n  return (\n    <section className='header-search-wrap'>\n      <div className='header-search'>\n        <form\n          onChange={handleSubmit(onSearchFormSubmit)}\n          onSubmit={handleSubmit(onSearchFormSubmit)}\n          className='header-search-form'\n        >\n          <input\n            {...register('search')}\n            placeholder='Hôm nay bạn cần tìm gì?'\n            className='form-input header-search-input'\n          />\n          <button\n            title='search button'\n            type='submit'\n            className='btn header-search-btn'\n          >\n            <FontAwesomeIcon icon={faMagnifyingGlass} />\n          </button>\n        </form>\n        {(filterData.length > 0 || message) && (\n          <section className='header-search-data'>\n            {filterData.map((item, index) => (\n              <SearchItem\n                key={index}\n                data={item}\n                closeModal={handleCloseModal}\n              />\n            ))}\n            {filterData.length > 0 && (\n              <Link\n                to={`/search/${filterMessage}`}\n                className='header-search-filter-message'\n              >\n                Hiển thị kết quả cho {<span>{filterMessage}</span>}\n              </Link>\n            )}\n            {message && <span>{message}</span>}\n          </section>\n        )}\n      </div>\n    </section>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}