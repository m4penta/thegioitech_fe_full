{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import qs from'qs';import{useEffect,useState}from'react';import{useParams}from'react-router';import{Link}from'react-router-dom';import{query}from'../../access';import{getQueryString}from'../../util';import{Card}from'../common/card';import'./content-list.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ContentList=function ContentList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contentListData=_useState2[0],setContentListData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useParams=useParams(),slug=_useParams.slug;var handleFilter=function handleFilter(){setFilter(getQueryString(window.location));};useEffect(function(){var id=slug.split('-').slice(-1)[0];var isCancelling=false;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$query$product$,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return query().product.getFilter(qs.stringify(_objectSpread({category:id},filter)));case 3:_yield$query$product$=_context.sent;data=_yield$query$product$.data;if(isCancelling===false){setContentListData(data);setLoading(false);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setLoading(false);case 11:return _context.abrupt(\"return\",function(){isCancelling=true;});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();},[slug,filter]);return/*#__PURE__*/_jsx(\"section\",{className:\"container content-list-wrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-list-filter\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"filter-text\",children:\"L\\u1ECDc danh s\\xE1ch:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"filter-list\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"filter-item\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"filter-item-text\",children:\"S\\u1EAFp x\\u1EBFp\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"filter-item-detail-list\",children:/*#__PURE__*/_jsx(\"li\",{className:\"filter-item-detail-item\",children:/*#__PURE__*/_jsx(Link,{onClick:handleFilter,to:\"/category/\".concat(slug,\"?\").concat(qs.stringify({sort:'-view'})),className:\"filter-item-detail-text\",children:\"L\\u01B0\\u1EE3t xem nhi\\u1EC1u \\u0111\\u1EBFn th\\u1EA5p\"})})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-list-product\",children:[contentListData===null||contentListData===void 0?void 0:contentListData.map(function(entity){return/*#__PURE__*/_jsx(Card,{data:entity,loading:loading},entity._id);}),contentListData.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:\"Ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m\"})]})]})});};","map":{"version":3,"names":["qs","useEffect","useState","useParams","Link","query","getQueryString","Card","jsx","_jsx","jsxs","_jsxs","ContentList","props","_useState","_useState2","_slicedToArray","contentListData","setContentListData","_useState3","_useState4","filter","setFilter","_useState5","_useState6","loading","setLoading","_useParams","slug","handleFilter","window","location","id","split","slice","isCancelling","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$query$product$","data","wrap","_callee$","_context","prev","next","product","getFilter","stringify","_objectSpread","category","sent","t0","abrupt","stop","className","children","onClick","to","concat","sort","map","entity","_id","length"],"sources":["/Users/mac/Documents/Đồ án tốt nghiệp/ĐỒ ÁN/FE/thegioitech_fe_full/src/component/content-list/index.jsx"],"sourcesContent":["import qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { query } from '../../access';\nimport { getQueryString } from '../../util';\nimport { Card } from '../common/card';\nimport './content-list.scss';\n\nexport const ContentList = (props) => {\n  const [contentListData, setContentListData] = useState([]);\n  const [filter, setFilter] = useState({});\n  const [loading, setLoading] = useState(true);\n  const { slug } = useParams();\n\n  const handleFilter = () => {\n    setFilter(getQueryString(window.location));\n  };\n\n  useEffect(() => {\n    const id = slug.split('-').slice(-1)[0];\n    let isCancelling = false;\n    (async () => {\n      try {\n        const { data } = await query().product.getFilter(\n          qs.stringify({ category: id, ...filter })\n        );\n        if (isCancelling === false) {\n          setContentListData(data);\n          setLoading(false);\n        }\n      } catch (error) {\n        setLoading(false);\n      }\n      return () => {\n        isCancelling = true;\n      };\n    })();\n  }, [slug, filter]);\n\n  return (\n    <section className='container content-list-wrap'>\n      <div className='content-list'>\n        <div className='content-list-filter'>\n          <p className='filter-text'>Lọc danh sách:</p>\n          <ul className='filter-list'>\n            <li className='filter-item'>\n              <p className='filter-item-text'>Sắp xếp</p>\n              <ul className='filter-item-detail-list'>\n                <li className='filter-item-detail-item'>\n                  <Link\n                    onClick={handleFilter}\n                    to={`/category/${slug}?${qs.stringify({\n                      sort: '-view',\n                    })}`}\n                    className='filter-item-detail-text'\n                  >\n                    Lượt xem nhiều đến thấp\n                  </Link>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n        <div className='content-list-product'>\n          {contentListData?.map((entity) => (\n            <Card key={entity._id} data={entity} loading={loading} />\n          ))}\n          {contentListData.length === 0 && (\n            <p className='error-message'>Chưa có sản phẩm</p>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}