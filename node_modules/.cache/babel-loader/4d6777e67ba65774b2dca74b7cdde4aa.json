{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/src/component/layout/header/search.jsx\",\n  _s = $RefreshSig$();\nimport { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { SearchItem } from './search-item';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Search = () => {\n  _s();\n  const [filterData, setFilterData] = useState([]);\n  const [message, setMessage] = useState(undefined);\n  const [filterMessage, setFilterMessage] = useState('');\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  useEffect(() => {\n    const handleOuterClick = _ref => {\n      let {\n        target\n      } = _ref;\n      if (target.className !== 'header-search-data') {\n        setMessage(undefined);\n        setFilterMessage('');\n        setFilterData([]);\n      }\n    };\n    if (filterData.length > 0 || message) {\n      window.addEventListener('click', handleOuterClick);\n    }\n    return () => {\n      window.removeEventListener('click', handleOuterClick);\n    };\n  }, [filterData, message]);\n  const onSearchFormSubmit = async data => {\n    const productQuery = data.search;\n    if (!productQuery) {\n      setFilterData([]);\n      setMessage(undefined);\n      return;\n    }\n    const {\n      data: filter\n    } = await axios.get('https://thegioitech-be.herokuapp.com/api/product/search/' + productQuery);\n    if (filter.length > 0) {\n      setFilterData(filter);\n      setFilterMessage(productQuery);\n      setMessage(undefined);\n    } else {\n      setFilterData([]);\n      setMessage('Not found');\n      setFilterMessage('');\n    }\n  };\n  const handleCloseModal = () => {\n    setMessage(undefined);\n    setFilterMessage('');\n    setFilterData([]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"header-search-wrap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-search\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onChange: handleSubmit(onSearchFormSubmit),\n        onSubmit: handleSubmit(onSearchFormSubmit),\n        className: \"header-search-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ...register('search'),\n          placeholder: \"H\\xF4m nay b\\u1EA1n c\\u1EA7n t\\xECm g\\xEC?\",\n          className: \"form-input header-search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          title: \"search button\",\n          type: \"submit\",\n          className: \"btn header-search-btn\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faMagnifyingGlass\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), (filterData.length > 0 || message) && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"header-search-data\",\n        children: [filterData.map((item, index) => /*#__PURE__*/_jsxDEV(SearchItem, {\n          data: item,\n          closeModal: handleCloseModal\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }, this)), filterData.length > 0 && /*#__PURE__*/_jsxDEV(Link, {\n          to: `/search/${filterMessage}`,\n          className: \"header-search-filter-message\",\n          children: [\"Hi\\u1EC3n th\\u1ECB k\\u1EBFt qu\\u1EA3 cho \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: filterMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 39\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), message && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(Search, \"6mHmxOH03dC4KawNWdMewl5Xgxc=\", false, function () {\n  return [useForm];\n});\n_c = Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["faMagnifyingGlass","FontAwesomeIcon","useEffect","useState","useForm","Link","SearchItem","axios","jsxDEV","_jsxDEV","Search","_s","filterData","setFilterData","message","setMessage","undefined","filterMessage","setFilterMessage","register","handleSubmit","handleOuterClick","_ref","target","className","length","window","addEventListener","removeEventListener","onSearchFormSubmit","data","productQuery","search","filter","get","handleCloseModal","children","onChange","onSubmit","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","title","type","icon","map","item","index","closeModal","to","_c","$RefreshReg$"],"sources":["/Users/mac/Documents/Đồ án tốt nghiệp/ĐỒ ÁN/FE/thegioitech_fe_full/src/component/layout/header/search.jsx"],"sourcesContent":["import { faMagnifyingGlass } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { SearchItem } from './search-item';\nimport axios from 'axios';\n\nexport const Search = () => {\n  const [filterData, setFilterData] = useState([]);\n  const [message, setMessage] = useState(undefined);\n  const [filterMessage, setFilterMessage] = useState('');\n  const { register, handleSubmit } = useForm();\n\n  useEffect(() => {\n    const handleOuterClick = ({ target }) => {\n      if (target.className !== 'header-search-data') {\n        setMessage(undefined);\n        setFilterMessage('');\n        setFilterData([]);\n      }\n    };\n    if (filterData.length > 0 || message) {\n      window.addEventListener('click', handleOuterClick);\n    }\n    return () => {\n      window.removeEventListener('click', handleOuterClick);\n    };\n  }, [filterData, message]);\n\n  const onSearchFormSubmit = async (data) => {\n    const productQuery = data.search;\n    if (!productQuery) {\n      setFilterData([]);\n      setMessage(undefined);\n      return;\n    }\n    const { data: filter } = await axios.get(\n      'https://thegioitech-be.herokuapp.com/api/product/search/' + productQuery\n    );\n    if (filter.length > 0) {\n      setFilterData(filter);\n      setFilterMessage(productQuery);\n      setMessage(undefined);\n    } else {\n      setFilterData([]);\n      setMessage('Not found');\n      setFilterMessage('');\n    }\n  };\n\n  const handleCloseModal = () => {\n    setMessage(undefined);\n    setFilterMessage('');\n    setFilterData([]);\n  };\n\n  return (\n    <section className='header-search-wrap'>\n      <div className='header-search'>\n        <form\n          onChange={handleSubmit(onSearchFormSubmit)}\n          onSubmit={handleSubmit(onSearchFormSubmit)}\n          className='header-search-form'\n        >\n          <input\n            {...register('search')}\n            placeholder='Hôm nay bạn cần tìm gì?'\n            className='form-input header-search-input'\n          />\n          <button\n            title='search button'\n            type='submit'\n            className='btn header-search-btn'\n          >\n            <FontAwesomeIcon icon={faMagnifyingGlass} />\n          </button>\n        </form>\n        {(filterData.length > 0 || message) && (\n          <section className='header-search-data'>\n            {filterData.map((item, index) => (\n              <SearchItem\n                key={index}\n                data={item}\n                closeModal={handleCloseModal}\n              />\n            ))}\n            {filterData.length > 0 && (\n              <Link\n                to={`/search/${filterMessage}`}\n                className='header-search-filter-message'\n              >\n                Hiển thị kết quả cho {<span>{filterMessage}</span>}\n              </Link>\n            )}\n            {message && <span>{message}</span>}\n          </section>\n        )}\n      </div>\n    </section>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}