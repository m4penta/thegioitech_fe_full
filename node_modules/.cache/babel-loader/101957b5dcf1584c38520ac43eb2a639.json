{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{faPaperPlane,faReply}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{useEffect,useRef,useState}from'react';import{useSelector}from'react-redux';import{getUserDecode}from'../../redux/authSlice';import{query}from'../../access';import{axiosClient}from'../../access/api/axios-client';import{CommentItem}from'./comment-item';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Comment=function Comment(props){var productId=props.productId,name=props.name;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _useState3=useState({value:1}),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],setUpdate=_useState4[1];var userInfo=useSelector(getUserDecode);var commentRef=useRef(null);var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var comment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();comment={content:commentRef.current.value,user:userInfo._id,product:productId};console.log('üöÄ ~ file: comment.jsx ~ line 22 ~ handleFormSubmit ~ comment',comment);_context.prev=3;_context.next=6;return axiosClient.post('/comment/add',comment);case 6:setUpdate(function(state){return{value:state.value+1};});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[3,9]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();var handleRefresh=function handleRefresh(){setUpdate(function(state){return{value:state.value+1};});};useEffect(function(){var isCancelling=false;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$query$comment$,productComment;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return query().comment.getListByProductId(productId);case 3:_yield$query$comment$=_context2.sent;productComment=_yield$query$comment$.data.productComment;if(isCancelling===false){setComment(productComment);}_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}))();return function(){isCancelling=true;};},[productId,update.value]);return/*#__PURE__*/_jsx(\"section\",{className:\"comment-wrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-heading\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"comment-heading-text\",children:[\"B\\xECnh lu\\u1EADn v\\u1EC1 \",name]})}),/*#__PURE__*/_jsxs(\"form\",{className:\"comment-form\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-field-bottom\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"N\\u1ED9i dung. T\\u1ED1i thi\\u1EC3u 15 k\\xFD t\\u1EF1\",required:true,minLength:\"15\",className:\"comment-form-area\",ref:commentRef})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-form-action\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-form-action-text\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"* \\u0110\\u1EC3 g\\u1EEDi b\\xECnh lu\\u1EADn, b\\u1EA1n c\\u1EA7n nh\\u1EADp t\\u1ED1i thi\\u1EC3u 15 k\\xFD t\\u1EF1.\"}),userInfo===null&&/*#__PURE__*/_jsx(\"p\",{style:{color:'#fd475a'},children:\"* B\\u1EA1n c\\u1EA7n \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 b\\xECnh lu\\u1EADn!\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:userInfo===null?'button':'submit',className:\"btn comment-form-action-btn\",style:{cursor:userInfo===null?'no-drop':'pointer'},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperPlane}),/*#__PURE__*/_jsx(\"span\",{children:\"G\\u1EEDi b\\xECnh lu\\u1EADn\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-list\",children:comment.length>0?comment.map(function(item){return/*#__PURE__*/_jsx(CommentItem,_objectSpread(_objectSpread({},item),{},{onRefesh:handleRefresh}),item._id);}):/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center'},children:\"Ch\\u01B0a c\\xF3 b\\xECnh lu\\u1EADn!\"})})]})});};","map":{"version":3,"names":["faPaperPlane","faReply","FontAwesomeIcon","useEffect","useRef","useState","useSelector","getUserDecode","query","axiosClient","CommentItem","jsxs","_jsxs","jsx","_jsx","Comment","props","productId","name","_useState","_useState2","_slicedToArray","comment","setComment","_useState3","value","_useState4","update","setUpdate","userInfo","commentRef","handleFormSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_callee$","_context","prev","next","preventDefault","content","current","user","_id","product","console","log","post","state","t0","stop","_x","apply","arguments","handleRefresh","isCancelling","_callee2","_yield$query$comment$","productComment","_callee2$","_context2","getListByProductId","sent","data","className","children","onSubmit","placeholder","required","minLength","ref","style","color","type","cursor","icon","length","map","item","_objectSpread","onRefesh","textAlign"],"sources":["/Users/mac/Documents/ƒêoÃÇÃÄ aÃÅn toÃÇÃÅt nghieÃ£ÃÇp/ƒêOÃÇÃÄ AÃÅN/FE/thegioitech_fe_full/src/component/content-detail/comment.jsx"],"sourcesContent":["import { faPaperPlane, faReply } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useEffect, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { getUserDecode } from '../../redux/authSlice';\nimport { query } from '../../access';\nimport { axiosClient } from '../../access/api/axios-client';\nimport { CommentItem } from './comment-item';\n\nexport const Comment = (props) => {\n  const { productId, name } = props;\n  const [comment, setComment] = useState([]);\n  const [update, setUpdate] = useState({ value: 1 });\n  const userInfo = useSelector(getUserDecode);\n  const commentRef = useRef(null);\n\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    const comment = {\n      content: commentRef.current.value,\n      user: userInfo._id,\n      product: productId,\n    };\n    console.log(\n      'üöÄ ~ file: comment.jsx ~ line 22 ~ handleFormSubmit ~ comment',\n      comment\n    );\n    try {\n      await axiosClient.post('/comment/add', comment);\n      setUpdate((state) => ({ value: state.value + 1 }));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleRefresh = () => {\n    setUpdate((state) => ({ value: state.value + 1 }));\n  };\n\n  useEffect(() => {\n    let isCancelling = false;\n    (async () => {\n      try {\n        const {\n          data: { productComment },\n        } = await query().comment.getListByProductId(productId);\n        if (isCancelling === false) {\n          setComment(productComment);\n        }\n      } catch (error) {}\n    })();\n\n    return () => {\n      isCancelling = true;\n    };\n  }, [productId, update.value]);\n\n  return (\n    <section className='comment-wrap'>\n      <div className='comment'>\n        <div className='comment-heading'>\n          <h5 className='comment-heading-text'>B√¨nh lu·∫≠n v·ªÅ {name}</h5>\n        </div>\n        <form className='comment-form' onSubmit={handleFormSubmit}>\n          <div className='form-field-bottom'>\n            <textarea\n              placeholder='N·ªôi dung. T·ªëi thi·ªÉu 15 k√Ω t·ª±'\n              required\n              minLength='15'\n              className='comment-form-area'\n              ref={commentRef}\n            ></textarea>\n          </div>\n          <div className='comment-form-action'>\n            <div className='comment-form-action-text'>\n              <p>* ƒê·ªÉ g·ª≠i b√¨nh lu·∫≠n, b·∫°n c·∫ßn nh·∫≠p t·ªëi thi·ªÉu 15 k√Ω t·ª±.</p>\n              {userInfo === null && (\n                <p style={{ color: '#fd475a' }}>\n                  * B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ b√¨nh lu·∫≠n!\n                </p>\n              )}\n            </div>\n            <button\n              type={userInfo === null ? 'button' : 'submit'}\n              className='btn comment-form-action-btn'\n              style={{ cursor: userInfo === null ? 'no-drop' : 'pointer' }}\n            >\n              <FontAwesomeIcon icon={faPaperPlane} />\n              <span>G·ª≠i b√¨nh lu·∫≠n</span>\n            </button>\n          </div>\n        </form>\n        <div className='comment-list'>\n          {comment.length > 0 ? (\n            comment.map((item) => (\n              <CommentItem key={item._id} {...item} onRefesh={handleRefresh} />\n            ))\n          ) : (\n            <p style={{ textAlign: 'center' }}>Ch∆∞a c√≥ b√¨nh lu·∫≠n!</p>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}