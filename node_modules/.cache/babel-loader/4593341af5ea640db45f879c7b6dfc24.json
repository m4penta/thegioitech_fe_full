{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/\\u0110o\\u0302\\u0300 a\\u0301n to\\u0302\\u0301t nghie\\u0323\\u0302p/\\u0110O\\u0302\\u0300 A\\u0301N/FE/thegioitech_fe_full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{faReply}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import moment from\"moment\";import{useRef,useState}from\"react\";import{useSelector}from\"react-redux\";import{axiosClient}from\"../../access/api/axios-client\";import{getUserDecode}from\"../../redux/authSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CommentItem=function CommentItem(props){var _id=props._id,user=props.user,updatedAt=props.updatedAt,content=props.content,product=props.product,replyComment=props.replyComment,onRefesh=props.onRefesh;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),replyActive=_useState2[0],setReplyActive=_useState2[1];var replyRef=useRef(null);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var userInfo=useSelector(getUserDecode);var handleReplyClick=function handleReplyClick(){setReplyActive(!replyActive);};var handleReplySubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var replyComment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(replyRef.current.value.length<5)){_context.next=3;break;}setError(true);return _context.abrupt(\"return\");case 3:setError(false);replyComment={content:replyRef.current.value,user:userInfo._id,product:product._id};_context.prev=5;_context.next=8;return axiosClient.post(\"/comment/reply?id=\"+_id,replyComment);case 8:replyRef.current.value=\"\";setReplyActive(false);onRefesh();_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);console.log(\"🚀 ~ file: comment-item.jsx ~ line 30 ~ handleReplySubmit ~ error\",_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,13]]);}));return function handleReplySubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-list-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-item-media\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://hoanghamobile.com/Content/web/img/no-avt.png\",alt:\"No avatar\",className:\"rounded-circle comment-item-img\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-item-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-detail-heading\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"comment-detail-heading-text\",children:user.firstName+\" \"+user.lastName}),/*#__PURE__*/_jsx(\"time\",{className:\"comment-detail-time\",children:moment(updatedAt).fromNow()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-detail-text\",children:content})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleReplyClick,className:\"comment-action\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faReply})}),/*#__PURE__*/_jsx(\"div\",{className:\"reply-comment-list\",children:replyComment===null||replyComment===void 0?void 0:replyComment.map(function(_ref2){var content=_ref2.content,_id=_ref2._id,user=_ref2.user;return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-list-item reply-comment-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-item-media media\",children:/*#__PURE__*/_jsx(\"img\",{src:user.image,alt:\"\",className:\"rounded-circle comment-item-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item-detail reply-comment-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-detail-heading\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"comment-detail-heading-text\",children:[user.firstName+\" \"+user.lastName,user.role===\"admin\"?/*#__PURE__*/_jsx(\"span\",{className:\"comment-manager\",children:\"Qu\\u1EA3n tr\\u1ECB vi\\xEAn\"}):null]}),/*#__PURE__*/_jsx(\"time\",{className:\"comment-detail-time\",children:moment(updatedAt).fromNow()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-detail-text content-main\",children:content})]})]},_id);})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"comment-reply-input\",ref:replyRef,placeholder:\"Nh\\u1EADp t\\u1ED1i thi\\u1EC3u 5 k\\xFD t\\u1EF1.\",style:{display:replyActive?\"block\":\"none\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleReplySubmit,className:\"comment-reply-btn\",style:{display:replyActive?\"block\":\"none\"},children:\"G\\u1EEDi\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"reply-error\",children:\"Vui l\\xF2ng \\u0111i\\u1EC1n t\\u1ED1i thi\\u1EC3u 5 k\\xFD t\\u1EF1!\"})]},_id);};","map":{"version":3,"names":["faReply","FontAwesomeIcon","moment","useRef","useState","useSelector","axiosClient","getUserDecode","jsx","_jsx","jsxs","_jsxs","CommentItem","props","_id","user","updatedAt","content","product","replyComment","onRefesh","_useState","_useState2","_slicedToArray","replyActive","setReplyActive","replyRef","_useState3","_useState4","error","setError","userInfo","handleReplyClick","handleReplySubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","current","value","length","abrupt","post","t0","console","log","stop","apply","arguments","className","children","src","alt","firstName","lastName","fromNow","type","onClick","icon","map","_ref2","image","role","ref","placeholder","style","display"],"sources":["/Users/mac/Documents/Đồ án tốt nghiệp/ĐỒ ÁN/FE/thegioitech_fe_full/src/component/content-detail/comment-item.jsx"],"sourcesContent":["import { faReply } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport moment from \"moment\";\nimport { useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { axiosClient } from \"../../access/api/axios-client\";\nimport { getUserDecode } from \"../../redux/authSlice\";\n\nexport const CommentItem = (props) => {\n  const { _id, user, updatedAt, content, product, replyComment, onRefesh } =\n    props;\n  const [replyActive, setReplyActive] = useState(false);\n  const replyRef = useRef(null);\n  const [error, setError] = useState(\"\");\n  const userInfo = useSelector(getUserDecode);\n\n  const handleReplyClick = () => {\n    setReplyActive(!replyActive);\n  };\n\n  const handleReplySubmit = async () => {\n    if (replyRef.current.value.length < 5) {\n      setError(true);\n      return;\n    }\n    setError(false);\n    const replyComment = {\n      content: replyRef.current.value,\n      user: userInfo._id,\n      product: product._id,\n    };\n    try {\n      await axiosClient.post(\"/comment/reply?id=\" + _id, replyComment);\n      replyRef.current.value = \"\";\n      setReplyActive(false);\n      onRefesh();\n    } catch (error) {\n      console.log(\n        \"🚀 ~ file: comment-item.jsx ~ line 30 ~ handleReplySubmit ~ error\",\n        error\n      );\n    }\n  };\n\n  return (\n    <div key={_id} className=\"comment-list-item\">\n      <div className=\"comment-item-media\">\n        <img\n          src={\"https://hoanghamobile.com/Content/web/img/no-avt.png\"}\n          alt=\"No avatar\"\n          className=\"rounded-circle comment-item-img\"\n        />\n      </div>\n      <div className=\"comment-item-content\">\n        <div className=\"comment-item-detail\">\n          <div className=\"comment-detail-heading\">\n            <p className=\"comment-detail-heading-text\">\n              {user.firstName + \" \" + user.lastName}\n            </p>\n            <time className=\"comment-detail-time\">\n              {moment(updatedAt).fromNow()}\n            </time>\n          </div>\n          <p className=\"comment-detail-text\">{content}</p>\n        </div>\n      </div>\n      <button\n        type=\"button\"\n        onClick={handleReplyClick}\n        className=\"comment-action\"\n      >\n        <FontAwesomeIcon icon={faReply} />\n      </button>\n      <div className=\"reply-comment-list\">\n        {replyComment?.map(({ content, _id, user }) => (\n          <div key={_id} className=\"comment-list-item reply-comment-item\">\n            <div className=\"comment-item-media media\">\n              <img\n                src={user.image}\n                alt=\"\"\n                className=\"rounded-circle comment-item-img\"\n              />\n            </div>\n\n            <div className=\"comment-item-detail reply-comment-content\">\n              <div className=\"comment-detail-heading\">\n                <p className=\"comment-detail-heading-text\">\n                  {user.firstName + \" \" + user.lastName}\n                  {user.role === \"admin\" ? (\n                    <span className=\"comment-manager\">Quản trị viên</span>\n                  ) : null}\n                </p>\n                <time className=\"comment-detail-time\">\n                  {moment(updatedAt).fromNow()}\n                </time>\n              </div>\n              <p className=\"comment-detail-text content-main\">{content}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n      <input\n        type=\"text\"\n        className=\"comment-reply-input\"\n        ref={replyRef}\n        placeholder=\"Nhập tối thiểu 5 ký tự.\"\n        style={{ display: replyActive ? \"block\" : \"none\" }}\n      />\n      <button\n        type=\"button\"\n        onClick={handleReplySubmit}\n        className=\"comment-reply-btn\"\n        style={{ display: replyActive ? \"block\" : \"none\" }}\n      >\n        Gửi\n      </button>\n      {error && (\n        <span className=\"reply-error\">Vui lòng điền tối thiểu 5 ký tự!</span>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}